import { useEffect, useState } from "react";
import useMightyMouse from "react-hook-mighty-mouse";

export default (props) => {
  const [closedEyes, setClosedEyes] = useState(props.loading);

  useEffect(() => {
    setClosedEyes(props.loading);
  }, [props.loading]);

  const blink = () => {
    setClosedEyes(true);
    setTimeout(() => setClosedEyes(false), 66);
  };

  const {
    selectedElement: {
      position: { angle: angleLeftEye },
    },
  } = useMightyMouse(true, "left-eye", { x: 5, y: 5 });
  const {
    selectedElement: {
      position: { angle: angleRightEye },
    },
  } = useMightyMouse(true, "right-eye", { x: 5, y: 5 });

  const styleLeftEye: React.CSSProperties = {
    transform: `rotate(${-angleLeftEye}deg)`,
    transformBox: "fill-box",
    transformOrigin: "center",
    opacity: closedEyes ? 0 : 100,
    transition: "opacity 66ms",
  };

  const styleRightEye: React.CSSProperties = {
    transform: `rotate(${-angleRightEye}deg)`,
    transformBox: "fill-box",
    transformOrigin: "center",
    opacity: closedEyes ? 0 : 100,
    transition: "opacity 66ms",
  };
  return (
    <svg
      width="80"
      height="80"
      viewBox="0 0 80 80"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      onMouseDown={blink}
      {...props}
    >
      <path
        d="M70.0957 0.123495C70.8367 0.123495 71.413 0.452815 71.8247 1.11145C72.2363 1.68776 72.4833 2.34641 72.5656 3.08738C72.5656 3.82835 72.401 4.52815 72.0716 5.18679C71.8247 5.84543 71.3307 6.21591 70.5897 6.29824L66.2674 6.66873C64.7031 7.08038 63.427 7.45087 62.439 7.78019C61.4511 8.02718 60.6689 8.52116 60.0926 9.26213C59.5163 9.92077 59.1047 10.9499 58.8577 12.3495C58.693 13.6668 58.6107 15.5604 58.6107 18.0303C58.6107 19.3475 58.6107 21.0765 58.6107 23.2171C58.693 25.3576 58.7342 28.2803 58.7342 31.9852C58.7342 32.5615 58.6519 33.2201 58.4872 33.9611C58.3225 34.7021 58.0344 35.443 57.6227 36.184C57.2934 36.8427 56.7583 37.5013 56.0173 38.1599C55.2763 38.7362 54.3707 39.1479 53.3004 39.3949C55.3587 40.1359 56.7171 41.9471 57.3757 44.8287C58.1167 47.7102 58.4872 50.9211 58.4872 54.4613C58.4872 56.6018 58.446 58.5366 58.3637 60.2655C58.2814 61.9121 58.199 63.4764 58.1167 64.9583C58.0373 66.3876 57.9241 67.4338 57.9932 68.8855C58.0755 70.3674 58.4049 71.3554 58.9812 71.8493C59.6398 72.4257 60.7924 72.755 62.439 72.8373L71.0837 73.3313C72.4833 73.4959 73.4301 73.9076 73.9241 74.5662C74.5004 75.3072 74.7885 76.0482 74.7885 76.7891C74.7062 77.6124 74.3357 78.3534 73.6771 79.012C73.0184 79.6707 72.0716 80 70.8367 80C69.1078 80 67.1318 79.9588 64.9089 79.8765C62.686 79.7942 60.5866 79.506 58.6107 79.012C56.6348 78.6004 54.947 77.9006 53.5474 76.9126C52.1478 76.007 51.4068 74.6486 51.3245 72.8373C51.0775 71.1084 50.9128 69.2971 50.8305 67.4035C50.7779 66.1926 50.8649 58.0761 51.0775 54.4613C51.0775 53.4733 51.0363 52.3618 50.954 51.1269C50.954 49.892 50.7893 48.7393 50.46 47.669C50.213 46.5988 49.7602 45.6931 49.1016 44.9522C48.5253 44.2112 47.702 43.8407 46.6317 43.8407C44.9851 43.8407 43.7501 43.3879 42.9268 42.4823C42.1859 41.5766 41.8154 40.5475 41.8154 39.3949C41.8154 38.4893 42.1859 37.6248 42.9268 36.8015C43.7501 35.8959 44.9851 35.443 46.6317 35.443C48.6899 35.443 49.9249 34.8256 50.3365 33.5906C50.8305 32.2733 51.0775 30.7502 51.0775 29.0213C51.0775 25.9751 51.0363 23.5052 50.954 21.6116C50.954 19.718 50.954 18.0714 50.954 16.6718C50.954 13.7079 51.1598 11.1969 51.5715 9.13863C51.9831 6.99805 52.8476 5.26912 54.1649 3.95184C55.4822 2.63456 57.4169 1.68776 59.9691 1.11145C62.5214 0.452815 65.8969 0.123495 70.0957 0.123495Z"
        fill="white"
      />
      <path
        d="M28.2803 0C29.0213 0 29.5976 0.32932 30.0093 0.987959C30.4209 1.56427 30.6679 2.22291 30.7502 2.96388C30.7502 3.70485 30.5856 4.40465 30.2563 5.06329C30.0093 5.72193 29.5153 6.09242 28.7743 6.17475L24.452 6.54523C22.8877 6.95688 21.6116 7.32737 20.6237 7.65669C19.6357 7.90368 18.8536 8.39766 18.2772 9.13862C17.7009 9.79726 17.2893 10.8264 17.0423 12.226C16.8776 13.5433 16.7953 15.4369 16.7953 17.9068C16.7953 19.224 16.7953 20.953 16.7953 23.0936C16.8776 25.2341 16.9188 28.1568 16.9188 31.8617C16.9188 32.438 16.8365 33.0966 16.6718 33.8376C16.5072 34.5786 16.219 35.3195 15.8074 36.0605C15.478 36.7192 14.9429 37.3778 14.2019 38.0364C13.4609 38.6127 12.5553 39.0244 11.485 39.2714C13.5433 40.0124 14.9017 41.8236 15.5604 44.7052C16.3013 47.5867 16.6718 50.7976 16.6718 54.3378C16.6718 56.4783 16.6307 58.4131 16.5483 60.142C16.466 61.7886 16.3837 63.3529 16.3013 64.8348C16.2219 66.2641 16.1087 67.3103 16.1778 68.762C16.2602 70.2439 16.5895 71.2319 17.1658 71.7259C17.8244 72.3022 18.9771 72.6315 20.6237 72.7138L29.2683 73.2078C30.6679 73.3725 31.6147 73.7841 32.1087 74.4427C32.685 75.1837 32.9731 75.9247 32.9731 76.6657C32.8908 77.489 32.5203 78.2299 31.8617 78.8886C31.2031 79.5472 30.2563 79.8765 29.0213 79.8765C27.2924 79.8765 25.3165 79.8354 23.0936 79.753C20.8706 79.6707 18.7712 79.3825 16.7953 78.8886C14.8194 78.4769 13.1316 77.7771 11.732 76.7891C10.3324 75.8835 9.59144 74.5251 9.50911 72.7138C9.26212 70.9849 9.09746 69.1736 9.01513 67.28C8.96248 66.0691 9.04948 57.9526 9.26212 54.3378C9.26212 53.3498 9.22095 52.2384 9.13862 51.0034C9.13862 49.7685 8.97396 48.6158 8.64465 47.5455C8.39766 46.4753 7.94484 45.5696 7.2862 44.8287C6.70989 44.0877 5.88659 43.7172 4.8163 43.7172C3.1697 43.7172 1.93475 43.2644 1.11145 42.3588C0.370485 41.4531 0 40.424 0 39.2714C0 38.3658 0.370485 37.5013 1.11145 36.678C1.93475 35.7724 3.1697 35.3195 4.8163 35.3195C6.87455 35.3195 8.1095 34.7021 8.52115 33.4671C9.01513 32.1498 9.26212 30.6267 9.26212 28.8978C9.26212 25.8516 9.22095 23.3817 9.13862 21.4881C9.13862 19.5945 9.13862 17.9479 9.13862 16.5483C9.13862 13.5844 9.34445 11.0734 9.7561 9.01513C10.1677 6.87455 11.0322 5.14562 12.3495 3.82834C13.6668 2.51106 15.6015 1.56427 18.1538 0.987959C20.706 0.32932 24.0815 0 28.2803 0Z"
        fill="white"
      />
      <g style={styleLeftEye}>
        <rect x="64" y="15" width="16" height="16" fill="none" id="left-eye" />

        <circle cx="76" cy="23" r="4" fill="white" />
      </g>

      <g style={styleRightEye}>
        <rect x="22" y="15" width="16" height="16" fill="none" id="right-eye" />
        <circle cx="34" cy="23" r="4" fill="white" />
      </g>
    </svg>
  );
};
